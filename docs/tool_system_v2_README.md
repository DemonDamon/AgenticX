# AgenticX å·¥å…·ç³»ç»Ÿ v2.0

## æ¦‚è¿°

AgenticX å·¥å…·ç³»ç»Ÿ v2.0 æ˜¯ä¸€ä¸ªå…¨é¢é‡æ„çš„å·¥å…·ç®¡ç†å’Œæ‰§è¡Œæ¡†æ¶ï¼Œæä¾›äº†ç»Ÿä¸€çš„å·¥å…·æ¥å£ã€å®‰å…¨ç®¡ç†ã€åè®®é€‚é…å’Œå¸‚åœºåŠŸèƒ½ã€‚

## ä¸»è¦ç‰¹æ€§

### ğŸ› ï¸ æ ¸å¿ƒç»„ä»¶
- **ç»Ÿä¸€å·¥å…·æ¥å£**: `BaseTool` æŠ½è±¡åŸºç±»ï¼Œæ”¯æŒåŒæ­¥å’Œå¼‚æ­¥æ‰§è¡Œ
- **å·¥å…·å…ƒæ•°æ®**: å®Œæ•´çš„å·¥å…·æè¿°ä¿¡æ¯ï¼ŒåŒ…æ‹¬å‚æ•°å®šä¹‰ã€åˆ†ç±»ã€æ ‡ç­¾ç­‰
- **å‚æ•°éªŒè¯**: ç±»å‹å®‰å…¨å’Œä¸šåŠ¡é€»è¾‘éªŒè¯
- **æ‰§è¡Œä¸Šä¸‹æ–‡**: æ”¯æŒå¤šç§Ÿæˆ·ã€ä¼šè¯ç®¡ç†å’Œç¯å¢ƒå˜é‡

### ğŸ—ƒï¸ æ³¨å†Œè¡¨å’Œå·¥å‚
- **å·¥å…·æ³¨å†Œè¡¨**: é›†ä¸­ç®¡ç†å·¥å…·æ³¨å†Œã€å‘ç°å’Œç”Ÿå‘½å‘¨æœŸ
- **å·¥å…·å·¥å‚**: åŠ¨æ€åˆ›å»ºå·¥å…·å®ä¾‹ï¼Œæ”¯æŒä»å‡½æ•°åˆ›å»ºå·¥å…·
- **åˆ†ç±»ç®¡ç†**: æŒ‰ç±»åˆ«ã€æ ‡ç­¾ã€ä½œè€…ç­‰ç»´åº¦ç»„ç»‡å·¥å…·
- **ä¾èµ–æ³¨å…¥**: æ”¯æŒå·¥å…·é—´çš„ä¾èµ–å…³ç³»ç®¡ç†

### âš¡ æ‰§è¡Œå¼•æ“
- **åŒæ­¥/å¼‚æ­¥æ‰§è¡Œ**: å®Œæ•´çš„å¼‚æ­¥æ”¯æŒï¼Œæ”¯æŒå¹¶å‘æ‰§è¡Œ
- **æ²™ç®±ç¯å¢ƒ**: å®‰å…¨çš„ä»£ç æ‰§è¡Œç¯å¢ƒï¼Œæ”¯æŒèµ„æºé™åˆ¶
- **é‡è¯•æœºåˆ¶**: å¯é…ç½®çš„é‡è¯•ç­–ç•¥å’Œé€€é¿ç®—æ³•
- **è¶…æ—¶æ§åˆ¶**: ç²¾ç»†çš„è¶…æ—¶ç®¡ç†å’Œå–æ¶ˆæœºåˆ¶
- **èµ„æºç›‘æ§**: å®æ—¶ç›‘æ§CPUã€å†…å­˜ã€ç½‘ç»œç­‰èµ„æºä½¿ç”¨

### ğŸ”’ å®‰å…¨ç®¡ç†
- **æƒé™ç³»ç»Ÿ**: åŸºäºè§’è‰²çš„ç»†ç²’åº¦æƒé™æ§åˆ¶
- **å®‰å…¨ç­–ç•¥**: å¯é…ç½®çš„å®‰å…¨è§„åˆ™å’Œçº¦æŸ
- **å®¡è®¡æ—¥å¿—**: å®Œæ•´çš„æ“ä½œè®°å½•å’Œå®¡è®¡è·Ÿè¸ª
- **å‡­æ®ç®¡ç†**: å®‰å…¨çš„å‡­æ®å­˜å‚¨å’Œè®¿é—®æ§åˆ¶
- **é™æµä¿æŠ¤**: åŸºäºä»¤ç‰Œæ¡¶ç®—æ³•çš„è¯·æ±‚é™æµ

### ğŸ”Œ åè®®é€‚é…
- **OpenAIé€‚é…å™¨**: æ”¯æŒOpenAIå‡½æ•°è°ƒç”¨æ ¼å¼
- **MCPé€‚é…å™¨**: æ”¯æŒæ¨¡å‹ä¸Šä¸‹æ–‡åè®®
- **å¤šåè®®æ”¯æŒ**: åŒæ—¶å¤„ç†å¤šç§åè®®æ ¼å¼
- **æ¶ˆæ¯è½¬æ¢**: ç»Ÿä¸€çš„æ¶ˆæ¯æ ¼å¼è½¬æ¢å’Œå¤„ç†

### ğŸª å·¥å…·å¸‚åœº
- **å·¥å…·å‘å¸ƒ**: æ”¯æŒå·¥å…·æ‰“åŒ…å’Œç‰ˆæœ¬ç®¡ç†
- **æœç´¢å‘ç°**: æ™ºèƒ½æœç´¢å’Œæ¨èåŠŸèƒ½
- **å®‰è£…ç®¡ç†**: ä¸€é”®å®‰è£…ã€æ›´æ–°å’Œå¸è½½
- **è¯„åˆ†è¯„è®º**: ç”¨æˆ·è¯„åˆ†å’Œåé¦ˆç³»ç»Ÿ
- **è¿œç¨‹å¸‚åœº**: æ”¯æŒè¿æ¥åˆ°è¿œç¨‹å·¥å…·å¸‚åœº

## å¿«é€Ÿå¼€å§‹

### 1. åˆ›å»ºå·¥å…·ç³»ç»Ÿ

```python
from agenticx.core import create_tool_system, ToolSystemConfig

# åˆ›å»ºé…ç½®
config = ToolSystemConfig(
    enable_security=True,
    enable_marketplace=True,
    enable_protocol_adapters=True,
    enable_sandbox=True,
    max_concurrent_executions=10,
    execution_timeout=30.0,
    security_level="medium"
)

# åˆ›å»ºå·¥å…·ç³»ç»Ÿ
tool_system = create_tool_system(config)
```

### 2. å®šä¹‰è‡ªå®šä¹‰å·¥å…·

```python
from agenticx.core import BaseTool, ToolMetadata, ToolParameter, ToolResult
from agenticx.core import ParameterType, ToolCategory
from typing import Dict, Any, Optional
import asyncio

class MyTool(BaseTool):
    def __init__(self):
        metadata = ToolMetadata(
            name="my_tool",
            description="æˆ‘çš„è‡ªå®šä¹‰å·¥å…·",
            category=ToolCategory.UTILITIES,
            parameters=[
                ToolParameter(
                    name="input",
                    type=ParameterType.STRING,
                    description="è¾“å…¥å‚æ•°",
                    required=True
                )
            ],
            tags=["custom", "utility"],
            version="1.0.0",
            author="YourName",
            timeout=10.0
        )
        super().__init__(metadata)
    
    async def execute_async(self, parameters: Dict[str, Any], 
                           context: Optional[ToolContext] = None) -> ToolResult:
        input_data = parameters.get("input", "")
        
        # å·¥å…·é€»è¾‘
        result = f"å¤„ç†ç»“æœ: {input_data.upper()}"
        
        return ToolResult(
            success=True,
            data={"result": result},
            metadata={"processed": True}
        )
```

### 3. æ³¨å†Œå’Œä½¿ç”¨å·¥å…·

```python
# æ³¨å†Œå·¥å…·
my_tool = MyTool()
tool_system.register_tool(my_tool)

# æ‰§è¡Œå·¥å…·
result = await tool_system.execute_tool_async("my_tool", {
    "input": "hello world"
})

if result.success:
    print(f"ç»“æœ: {result.data['result']}")
else:
    print(f"é”™è¯¯: {result.error}")
```

### 4. æœç´¢å’Œå‘ç°å·¥å…·

```python
# æœç´¢å·¥å…·
results = tool_system.search_tools("calculator", category="utilities")

for tool_info in results:
    print(f"å·¥å…·: {tool_info['name']}")
    print(f"æè¿°: {tool_info['description']}")
    print(f"æ¥æº: {tool_info['source']}")
    print("---")
```

### 5. ä»å¸‚åœºå®‰è£…å·¥å…·

```python
# æœç´¢å¸‚åœºå·¥å…·
marketplace_results = tool_system.search_tools("weather")

# å®‰è£…å·¥å…·
for tool in marketplace_results:
    if tool['source'] == 'marketplace' and not tool['installed']:
        success = tool_system.install_tool_from_marketplace(tool['name'])
        if success:
            print(f"æˆåŠŸå®‰è£…: {tool['name']}")
```

## é«˜çº§ç”¨æ³•

### å®‰å…¨ç®¡ç†

```python
from agenticx.core import SecurityManager, SecurityLevel, Permission

# æ£€æŸ¥æƒé™
if tool_system.check_security("my_tool", "execute"):
    result = await tool_system.execute_tool_async("my_tool", params)

# é…ç½®å®‰å…¨ç­–ç•¥
security_manager = tool_system.security_manager
security_manager.add_policy("restrict_sensitive_tools", {
    "tools": ["file_access", "database"],
    "allowed_roles": ["admin", "developer"],
    "conditions": {"time_range": "09:00-18:00"}
})
```

### åè®®é€‚é…

```python
from agenticx.core import ProtocolType, create_openai_adapter

# åˆ›å»ºOpenAIé€‚é…å™¨
openai_adapter = create_openai_adapter()

# è½¬æ¢å·¥å…·ä¸ºOpenAIå‡½æ•°æ ¼å¼
openai_functions = openai_adapter.convert_tools_to_functions([my_tool])

# å¤„ç†OpenAIå‡½æ•°è°ƒç”¨
openai_response = {
    "function_call": {
        "name": "my_tool",
        "arguments": '{"input": "test"}'
    }
}

tool_result = openai_adapter.handle_function_call(openai_response)
```

### æ‰¹é‡æ‰§è¡Œ

```python
# æ‰¹é‡æ‰§è¡Œå·¥å…·è°ƒç”¨
tasks = [
    ("calculator", {"operation": "add", "a": 1, "b": 2}),
    ("calculator", {"operation": "multiply", "a": 3, "b": 4}),
    ("weather", {"city": "åŒ—äº¬"})
]

results = await asyncio.gather(*[
    tool_system.execute_tool_async(name, params)
    for name, params in tasks
])

for (tool_name, params), result in zip(tasks, results):
    print(f"{tool_name}: {'æˆåŠŸ' if result.success else 'å¤±è´¥'}")
```

### ç›‘æ§å’Œç»Ÿè®¡

```python
# è·å–ç³»ç»ŸçŠ¶æ€
status = tool_system.get_system_status()
print(f"æ€»å·¥å…·æ•°: {status['registry']['total_tools']}")
print(f"æ€»æ‰§è¡Œæ¬¡æ•°: {status['executor']['total_executions']}")

# è·å–å·¥å…·ç»Ÿè®¡ä¿¡æ¯
tool_info = tool_system.get_tool_info("calculator")
if 'execution_stats' in tool_info:
    stats = tool_info['execution_stats']
    print(f"æ‰§è¡Œæ¬¡æ•°: {stats['total_executions']}")
    print(f"æˆåŠŸç‡: {stats['success_rate']:.2%}")
    print(f"å¹³å‡æ‰§è¡Œæ—¶é—´: {stats['avg_execution_time']:.2f}s")
```

## æ¶æ„è®¾è®¡

### ç»„ä»¶å…³ç³»

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ToolSystem                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚              ç»Ÿä¸€æ¥å£å±‚                              â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                           â”‚                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚   BaseTool  â”‚          â”‚          â”‚   ToolResult â”‚       â”‚
â”‚  â”‚  ToolMetadataâ”‚         â”‚          â”‚  ToolContext â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                           â”‚                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ToolRegistry â”‚ â”‚  ToolFactory    â”‚ â”‚ ToolExecutor    â”‚    â”‚
â”‚  â”‚  æ³¨å†Œç®¡ç†    â”‚ â”‚   å·¥å‚åˆ›å»º       â”‚ â”‚  æ‰§è¡Œå¼•æ“        â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                           â”‚                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚   Security  â”‚ â”‚   Protocol     â”‚ â”‚  Marketplace    â”‚    â”‚
â”‚  â”‚   Manager    â”‚ â”‚   Adapters     â”‚ â”‚   å·¥å…·å¸‚åœº       â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚   æ²™ç®±ç¯å¢ƒ       â”‚
                  â”‚ SandboxEnvironmentâ”‚
                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ•°æ®æµ

1. **å·¥å…·æ³¨å†Œ**: ToolFactory â†’ ToolRegistry
2. **å·¥å…·æ‰§è¡Œ**: ToolSystem â†’ ToolExecutor â†’ BaseTool
3. **å®‰å…¨æ£€æŸ¥**: ToolExecutor â†’ SecurityManager
4. **åè®®è½¬æ¢**: ProtocolAdapter â†’ ToolSystem
5. **å¸‚åœºäº¤äº’**: ToolMarketplace â†’ ToolRegistry

### æ ¸å¿ƒæ–‡ä»¶å…³ç³»

ä¸ºäº†æ›´å¥½åœ°ç†è§£å·¥å…·ç³»ç»Ÿ v2.0 çš„ä»£ç ç»“æ„ï¼Œä»¥ä¸‹è¯´æ˜äº†ä¸‰ä¸ªæ ¸å¿ƒæ–‡ä»¶ä¹‹é—´çš„å…³ç³»ï¼š

-   `agenticx/core/tool.py`:
    -   **è§’è‰²**: å®šä¹‰äº†**æ—§ç‰ˆï¼ˆv1ï¼‰**çš„å·¥å…·åŸºç±» (`LegacyBaseTool`)ã€‚
    -   **ç›®çš„**: è¿™æ˜¯ä¸ºäº†ä¿æŒå‘åå…¼å®¹æ€§è€Œä¿ç•™çš„æ—§ç‰ˆå·¥å…·å®šä¹‰ã€‚æ–°çš„å¼€å‘å·¥ä½œ**ä¸åº”è¯¥**ç›´æ¥ä½¿ç”¨æ­¤æ–‡ä»¶ä¸­çš„ç±»ã€‚å®ƒçš„å­˜åœ¨ä¸»è¦æ˜¯ä¸ºäº†å¹³æ»‘è¿‡æ¸¡ï¼Œå…è®¸æ—§çš„å·¥å…·å®ç°é€æ­¥è¿ç§»åˆ° v2 æ¡†æ¶ã€‚

-   `agenticx/core/tool_v2.py`:
    -   **è§’è‰²**: å®šä¹‰äº†**æ–°ç‰ˆï¼ˆv2ï¼‰**çš„æ ¸å¿ƒå·¥å…·æ¶æ„ã€‚
    -   **ç›®çš„**: è¿™æ˜¯å·¥å…·ç³»ç»Ÿ v2 çš„åŸºçŸ³ã€‚å®ƒå¼•å…¥äº† `BaseTool` (v2)ã€`ToolMetadata`ã€`ToolParameter`ã€`ToolResult` å’Œ `ToolContext` ç­‰ä¸€ç³»åˆ—ä¸°å¯Œçš„ç±»ã€‚è¿™äº›ç±»æä¾›äº†å¼ºå¤§çš„å…ƒæ•°æ®ç®¡ç†ã€ç±»å‹å®‰å…¨çš„å‚æ•°ã€ç»“æ„åŒ–çš„æ‰§è¡Œç»“æœå’Œçµæ´»çš„æ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œæ˜¯æ‰€æœ‰æ–°å·¥å…·å¼€å‘çš„åŸºç¡€ã€‚

-   `agenticx/core/tool_system.py`:
    -   **è§’è‰²**: **ç»Ÿä¸€çš„å·¥å…·ç³»ç»Ÿç®¡ç†å™¨**å’Œæ€»å…¥å£ã€‚
    -   **ç›®çš„**: è¯¥æ–‡ä»¶ä¸­çš„ `ToolSystem` ç±»æ˜¯æ•´ä¸ªå·¥å…·æ¡†æ¶çš„â€œå¤§è„‘â€ã€‚å®ƒæ•´åˆäº† v2 çš„æ‰€æœ‰æ ¸å¿ƒç»„ä»¶ï¼ŒåŒ…æ‹¬æ³¨å†Œè¡¨ (`ToolRegistry`)ã€æ‰§è¡Œå™¨ (`ToolExecutor`)ã€å®‰å…¨ç®¡ç†å™¨ (`SecurityManager`) ç­‰ã€‚æ‰€æœ‰ä¸å·¥å…·ç›¸å…³çš„æ“ä½œï¼Œå¦‚æ³¨å†Œã€æ‰§è¡Œã€æœç´¢ã€å®‰å…¨æ£€æŸ¥ç­‰ï¼Œéƒ½åº”è¯¥é€šè¿‡ `ToolSystem` å®ä¾‹æ¥å®Œæˆã€‚å®ƒä¾èµ– `tool_v2.py` ä¸­å®šä¹‰çš„æ¥å£å’Œæ•°æ®æ¨¡å‹æ¥ç®¡ç†å’Œåè°ƒæ•´ä¸ªå·¥å…·ç”Ÿæ€ã€‚

-   `agenticx/core/security.py`:
    -   **è§’è‰²**: **å®‰å…¨ç®¡ç†å™¨**ã€‚
    -   **ç›®çš„**: æä¾›å…¨é¢çš„å®‰å…¨åŠŸèƒ½ï¼ŒåŒ…æ‹¬æƒé™æ§åˆ¶ã€å®‰å…¨ç­–ç•¥ã€å®¡è®¡æ—¥å¿—å’Œå‡­æ®ç®¡ç†ã€‚`SecurityManager` ç¡®ä¿å·¥å…·çš„æ‰§è¡Œç¬¦åˆé¢„å®šä¹‰çš„å®‰å…¨è§„åˆ™ï¼Œé˜²æ­¢æœªç»æˆæƒçš„è®¿é—®å’Œæ¶æ„æ“ä½œã€‚

-   `agenticx/core/registry.py`:
    -   **è§’è‰²**: **å·¥å…·æ³¨å†Œè¡¨**ã€‚
    -   **ç›®çš„**: é›†ä¸­ç®¡ç†æ‰€æœ‰å·¥å…·çš„æ³¨å†Œã€å‘ç°å’Œç”Ÿå‘½å‘¨æœŸã€‚`ToolRegistry` ç»´æŠ¤ä¸€ä¸ªæ‰€æœ‰å¯ç”¨å·¥å…·çš„ç›®å½•ï¼Œå¹¶æŒ‰ç±»åˆ«ã€æ ‡ç­¾ç­‰è¿›è¡Œç»„ç»‡ï¼Œæ–¹ä¾¿ `ToolSystem` è¿›è¡ŒæŸ¥æ‰¾å’Œè°ƒç”¨ã€‚

-   `agenticx/core/marketplace.py`:
    -   **è§’è‰²**: **å·¥å…·å¸‚åœº**ã€‚
    -   **ç›®çš„**: æä¾›å·¥å…·çš„å‘ç°ã€å‘å¸ƒã€å®‰è£…å’Œç®¡ç†åŠŸèƒ½ã€‚`ToolMarketplace` å…è®¸ç”¨æˆ·ä»è¿œç¨‹æˆ–æœ¬åœ°æºå‘ç°å’Œé›†æˆæ–°å·¥å…·ï¼Œæ‰©å±•äº† `ToolSystem` çš„åŠŸèƒ½ã€‚

-   `agenticx/core/executor.py`:
    -   **è§’è‰²**: **å·¥å…·æ‰§è¡Œå¼•æ“**ã€‚
    -   **ç›®çš„**: è´Ÿè´£å·¥å…·çš„å®‰å…¨ã€å¯é æ‰§è¡Œã€‚`ToolExecutor` æä¾›äº†æ²™ç®±ç¯å¢ƒã€é‡è¯•é€»è¾‘ã€è¶…æ—¶æ§åˆ¶å’Œèµ„æºç›‘æ§ç­‰åŠŸèƒ½ï¼Œç¡®ä¿å·¥å…·åœ¨éš”ç¦»å’Œå—æ§çš„ç¯å¢ƒä¸­è¿è¡Œã€‚

-   `agenticx/core/adapters.py`:
    -   **è§’è‰²**: **åè®®é€‚é…å™¨**ã€‚
    -   **ç›®çš„**: ç”¨äºå°† `ToolSystem` ä¸ä¸åŒçš„å¤–éƒ¨å·¥å…·è°ƒç”¨åè®®ï¼ˆå¦‚ OpenAI Function Callingï¼‰è¿›è¡Œé›†æˆã€‚`ProtocolAdapter` è´Ÿè´£åœ¨ `ToolSystem` çš„å†…éƒ¨æ ¼å¼å’Œå¤–éƒ¨åè®®ä¹‹é—´è¿›è¡Œè½¬æ¢ï¼Œå®ç°äº†ç³»ç»Ÿçš„äº’æ“ä½œæ€§ã€‚

**æ€»ç»“**:

å¼€å‘è€…åœ¨åˆ›å»ºæ–°å·¥å…·æ—¶ï¼Œåº”è¯¥ç»§æ‰¿å’Œä½¿ç”¨ `tool_v2.py` ä¸­å®šä¹‰çš„ `BaseTool`ã€‚è€Œåœ¨åº”ç”¨ä¸­ä½¿ç”¨å·¥å…·æ—¶ï¼Œåˆ™åº”è¯¥é€šè¿‡ `tool_system.py` æä¾›çš„ `ToolSystem` æ¥è¿›è¡Œç»Ÿä¸€ç®¡ç†å’Œè°ƒç”¨ã€‚`tool.py` ä»…ä½œä¸ºå†å²å…¼å®¹å±‚å­˜åœ¨ã€‚

### `executor.py` vs `agent_executor.py`

åœ¨ `core` ç›®å½•ä¸­ï¼Œè¿˜å­˜åœ¨ä¸¤ä¸ªä¸â€œæ‰§è¡Œâ€ç›¸å…³çš„æ–‡ä»¶ï¼Œä½†å®ƒä»¬çš„èŒè´£ä½äºå®Œå…¨ä¸åŒçš„æŠ½è±¡å±‚æ¬¡ï¼š

-   `agenticx/core/executor.py` (`ToolExecutor`):
    -   **è§’è‰²**: **åº•å±‚å·¥å…·æ‰§è¡Œå¼•æ“**ã€‚
    -   **ç›®çš„**: å®ƒçš„å”¯ä¸€èŒè´£æ˜¯**å®‰å…¨ã€å¯é åœ°æ‰§è¡Œå•ä¸ªå·¥å…·**ã€‚å®ƒæä¾›äº†æ²™ç®±ã€èµ„æºé™åˆ¶ã€è¶…æ—¶å’Œé‡è¯•ç­‰åº•å±‚æœºåˆ¶ï¼Œç¡®ä¿å·¥å…·çš„æ‰§è¡Œè¿‡ç¨‹æ˜¯å—æ§çš„ã€‚å®ƒä¸å…³å¿ƒ Agent çš„ä»»åŠ¡æˆ–æ€ç»´é“¾ï¼Œåªä¸“æ³¨äºå®Œæˆä¸€æ¬¡å…·ä½“çš„å·¥å…·è°ƒç”¨ã€‚

-   `agenticx/core/agent_executor.py` (`AgentExecutor`):
    -   **è§’è‰²**: **é«˜å±‚ Agent çš„æ‰§è¡Œå¾ªç¯å’Œé€»è¾‘ä¸­æ¢**ã€‚
    -   **ç›®çš„**: å®ƒçš„èŒè´£æ˜¯**é©±åŠ¨ä¸€ä¸ª Agent å®Œæˆä¸€ä¸ªå¤æ‚çš„ä»»åŠ¡**ã€‚å®ƒå®ç°äº† Agent çš„â€œæ€è€ƒ-è¡ŒåŠ¨â€å¾ªç¯ï¼Œè´Ÿè´£è°ƒç”¨ LLM è¿›è¡Œå†³ç­–ï¼Œå¹¶æ ¹æ®å†³ç­–ç»“æœåè°ƒè°ƒç”¨ä¸€ä¸ªæˆ–å¤šä¸ªå·¥å…·ã€‚å®ƒæœ¬èº«ä¸æ‰§è¡Œå·¥å…·ï¼Œè€Œæ˜¯é€šè¿‡ `ToolSystem` **å§”æ‰˜** `ToolExecutor` æ¥å®Œæˆå…·ä½“çš„æ‰§è¡Œå·¥ä½œã€‚

**å…³ç³»æ¯”å–»**:

-   `ToolExecutor` æ˜¯ä¸€ä¸ª**ç²¾å¯†æœºåºŠ**ï¼Œæ“…é•¿ç²¾ç¡®ã€å®‰å…¨åœ°å®Œæˆä¸€é¡¹å…·ä½“æ“ä½œã€‚
-   `AgentExecutor` æ˜¯**è½¦é—´æ€»è°ƒåº¦å‘˜**ï¼Œä»–æ‹¿ç€ä»»åŠ¡è“å›¾ï¼ŒæŒ‡æŒ¥ä¸åŒçš„æœºåºŠååŒå·¥ä½œï¼Œæœ€ç»ˆå®Œæˆæ•´ä¸ªäº§å“ã€‚

**å»ºè®®**: è¿™ä¸¤ä¸ªæ–‡ä»¶åº”è¯¥**ä¿æŒç‹¬ç«‹**ã€‚å®ƒä»¬éµå¾ªäº†å•ä¸€èŒè´£åŸåˆ™å’Œæ¸…æ™°çš„æ¶æ„åˆ†å±‚ï¼Œå°†é«˜å±‚çš„ Agent é€»è¾‘ä¸åº•å±‚çš„å·¥å…·æ‰§è¡Œç»†èŠ‚è§£è€¦ï¼Œä½¿å¾—ç³»ç»Ÿæ›´æ˜“äºç»´æŠ¤ã€æµ‹è¯•å’Œæ‰©å±•ã€‚

### `executor.py` vs `agent_executor.py`

åœ¨ `core` ç›®å½•ä¸­ï¼Œè¿˜å­˜åœ¨ä¸¤ä¸ªä¸â€œæ‰§è¡Œâ€ç›¸å…³çš„æ–‡ä»¶ï¼Œä½†å®ƒä»¬çš„èŒè´£ä½äºå®Œå…¨ä¸åŒçš„æŠ½è±¡å±‚æ¬¡ï¼š

-   `agenticx/core/executor.py` (`ToolExecutor`):
    -   **è§’è‰²**: **åº•å±‚å·¥å…·æ‰§è¡Œå¼•æ“**ã€‚
    -   **ç›®çš„**: å®ƒçš„å”¯ä¸€èŒè´£æ˜¯**å®‰å…¨ã€å¯é åœ°æ‰§è¡Œå•ä¸ªå·¥å…·**ã€‚å®ƒæä¾›äº†æ²™ç®±ã€èµ„æºé™åˆ¶ã€è¶…æ—¶å’Œé‡è¯•ç­‰åº•å±‚æœºåˆ¶ï¼Œç¡®ä¿å·¥å…·çš„æ‰§è¡Œè¿‡ç¨‹æ˜¯å—æ§çš„ã€‚å®ƒä¸å…³å¿ƒ Agent çš„ä»»åŠ¡æˆ–æ€ç»´é“¾ï¼Œåªä¸“æ³¨äºå®Œæˆä¸€æ¬¡å…·ä½“çš„å·¥å…·è°ƒç”¨ã€‚

-   `agenticx/core/agent_executor.py` (`AgentExecutor`):
    -   **è§’è‰²**: **é«˜å±‚ Agent çš„æ‰§è¡Œå¾ªç¯å’Œé€»è¾‘ä¸­æ¢**ã€‚
    -   **ç›®çš„**: å®ƒçš„èŒè´£æ˜¯**é©±åŠ¨ä¸€ä¸ª Agent å®Œæˆä¸€ä¸ªå¤æ‚çš„ä»»åŠ¡**ã€‚å®ƒå®ç°äº† Agent çš„â€œæ€è€ƒ-è¡ŒåŠ¨â€å¾ªç¯ï¼Œè´Ÿè´£è°ƒç”¨ LLM è¿›è¡Œå†³ç­–ï¼Œå¹¶æ ¹æ®å†³ç­–ç»“æœåè°ƒè°ƒç”¨ä¸€ä¸ªæˆ–å¤šä¸ªå·¥å…·ã€‚å®ƒæœ¬èº«ä¸æ‰§è¡Œå·¥å…·ï¼Œè€Œæ˜¯é€šè¿‡ `ToolSystem` **å§”æ‰˜** `ToolExecutor` æ¥å®Œæˆå…·ä½“çš„æ‰§è¡Œå·¥ä½œã€‚

**å…³ç³»æ¯”å–»**:

-   `ToolExecutor` æ˜¯ä¸€ä¸ª**ç²¾å¯†æœºåºŠ**ï¼Œæ“…é•¿ç²¾ç¡®ã€å®‰å…¨åœ°å®Œæˆä¸€é¡¹å…·ä½“æ“ä½œã€‚
-   `AgentExecutor` æ˜¯**è½¦é—´æ€»è°ƒåº¦å‘˜**ï¼Œä»–æ‹¿ç€ä»»åŠ¡è“å›¾ï¼ŒæŒ‡æŒ¥ä¸åŒçš„æœºåºŠååŒå·¥ä½œï¼Œæœ€ç»ˆå®Œæˆæ•´ä¸ªäº§å“ã€‚

**å»ºè®®**: è¿™ä¸¤ä¸ªæ–‡ä»¶åº”è¯¥**ä¿æŒç‹¬ç«‹**ã€‚å®ƒä»¬éµå¾ªäº†å•ä¸€èŒè´£åŸåˆ™å’Œæ¸…æ™°çš„æ¶æ„åˆ†å±‚ï¼Œå°†é«˜å±‚çš„ Agent é€»è¾‘ä¸åº•å±‚çš„å·¥å…·æ‰§è¡Œç»†èŠ‚è§£è€¦ï¼Œä½¿å¾—ç³»ç»Ÿæ›´æ˜“äºç»´æŠ¤ã€æµ‹è¯•å’Œæ‰©å±•ã€‚

## æœ€ä½³å®è·µ

### 1. å·¥å…·è®¾è®¡åŸåˆ™
- **å•ä¸€èŒè´£**: æ¯ä¸ªå·¥å…·åº”è¯¥ä¸“æ³¨äºä¸€ä¸ªå…·ä½“çš„åŠŸèƒ½
- **å‚æ•°éªŒè¯**: åœ¨å·¥å…·å†…éƒ¨è¿›è¡Œå®Œæ•´çš„å‚æ•°éªŒè¯
- **é”™è¯¯å¤„ç†**: æä¾›æ¸…æ™°çš„é”™è¯¯ä¿¡æ¯å’Œé”™è¯¯ç 
- **è¶…æ—¶è®¾ç½®**: ä¸ºé•¿æ—¶é—´è¿è¡Œçš„æ“ä½œè®¾ç½®åˆç†çš„è¶…æ—¶æ—¶é—´
- **å¹‚ç­‰æ€§**: å°½å¯èƒ½è®¾è®¡å¹‚ç­‰çš„å·¥å…·æ“ä½œ

### 2. å®‰å…¨è€ƒè™‘
- **æƒé™æœ€å°åŒ–**: åªæˆäºˆå¿…è¦çš„æƒé™
- **è¾“å…¥éªŒè¯**: ä¸¥æ ¼éªŒè¯æ‰€æœ‰è¾“å…¥å‚æ•°
- **æ•æ„Ÿæ•°æ®**: ä½¿ç”¨CredentialStoreç®¡ç†æ•æ„Ÿä¿¡æ¯
- **å®¡è®¡æ—¥å¿—**: è®°å½•æ‰€æœ‰é‡è¦çš„æ“ä½œ
- **é™æµä¿æŠ¤**: ä¸ºé«˜é¢‘æ“ä½œè®¾ç½®é™æµè§„åˆ™

### 3. æ€§èƒ½ä¼˜åŒ–
- **å¼‚æ­¥æ‰§è¡Œ**: ä¼˜å…ˆä½¿ç”¨å¼‚æ­¥æ¥å£
- **è¿æ¥æ± **: å¤ç”¨æ•°æ®åº“å’Œç½‘ç»œè¿æ¥
- **ç¼“å­˜ç­–ç•¥**: å¯¹é¢‘ç¹è®¿é—®çš„æ•°æ®ä½¿ç”¨ç¼“å­˜
- **æ‰¹é‡æ“ä½œ**: æ”¯æŒæ‰¹é‡å¤„ç†å‡å°‘ç½‘ç»œå¼€é”€
- **èµ„æºç›‘æ§**: ç›‘æ§èµ„æºä½¿ç”¨æƒ…å†µå¹¶åŠæ—¶ä¼˜åŒ–

### 4. é”™è¯¯å¤„ç†
- **åˆ†çº§é”™è¯¯**: åŒºåˆ†ç³»ç»Ÿé”™è¯¯å’Œä¸šåŠ¡é”™è¯¯
- **é‡è¯•ç­–ç•¥**: ä¸ºä¸´æ—¶é”™è¯¯å®ç°æ™ºèƒ½é‡è¯•
- **é™çº§æ–¹æ¡ˆ**: ä¸ºä¸»å·¥å…·å‡†å¤‡å¤‡ç”¨æ–¹æ¡ˆ
- **ç”¨æˆ·å‹å¥½**: æä¾›ç”¨æˆ·å‹å¥½çš„é”™è¯¯ä¿¡æ¯
- **ç›‘æ§å‘Šè­¦**: å¯¹å…³é”®é”™è¯¯è®¾ç½®å‘Šè­¦

## è¿ç§»æŒ‡å—

### ä» v1 è¿ç§»åˆ° v2

1. **æ›´æ–°å¯¼å…¥è·¯å¾„**
   ```python
   # v1
   from agenticx.core.tool import BaseTool
   
   # v2
   from agenticx.core import BaseTool  # æ–°çš„ç»Ÿä¸€æ¥å£
   ```

2. **é€‚é…æ–°çš„å·¥å…·æ¥å£**
   ```python
   # v1
   class MyTool(BaseTool):
       name = "my_tool"
       description = "My tool"
       
       def execute(self, **kwargs):
           return {"result": "ok"}
   
   # v2
   class MyTool(BaseTool):
       def __init__(self):
           metadata = ToolMetadata(
               name="my_tool",
               description="My tool",
               # ... å…¶ä»–å…ƒæ•°æ®
           )
           super().__init__(metadata)
       
       async def execute_async(self, parameters, context=None):
           return ToolResult(success=True, data={"result": "ok"})
   ```

3. **ä½¿ç”¨æ–°çš„æ³¨å†Œå’Œæ‰§è¡Œæœºåˆ¶**
   ```python
   # v1 - ç›´æ¥æ‰§è¡Œ
   tool = MyTool()
   result = tool.execute(param="value")
   
   # v2 - é€šè¿‡å·¥å…·ç³»ç»Ÿ
   tool_system.register_tool(MyTool())
   result = await tool_system.execute_tool_async("my_tool", {"param": "value"})
   ```

4. **å¯ç”¨å®‰å…¨å’Œå¸‚åœºåŠŸèƒ½**
   ```python
   config = ToolSystemConfig(
       enable_security=True,
       enable_marketplace=True,
       # ... å…¶ä»–é…ç½®
   )
   tool_system = create_tool_system(config)
   ```

## ç¤ºä¾‹ä»£ç 

å‚è€ƒ `examples/tool_system_demo.py` è·å–å®Œæ•´çš„æ¼”ç¤ºä»£ç ï¼ŒåŒ…æ‹¬ï¼š

- åŸºæœ¬å·¥å…·åˆ›å»ºå’Œæ³¨å†Œ
- å·¥å…·æ‰§è¡Œå’Œé”™è¯¯å¤„ç†
- æ‰¹é‡æ‰§è¡Œå’Œå¹¶å‘æ§åˆ¶
- å®‰å…¨ç®¡ç†å’Œæƒé™æ£€æŸ¥
- å·¥å…·æœç´¢å’Œå¸‚åœºé›†æˆ
- ç³»ç»Ÿç›‘æ§å’Œç»Ÿè®¡ä¿¡æ¯

è¿è¡Œæ¼”ç¤ºï¼š
```bash
cd /Users/damon/myWork/AgenticX
python examples/tool_system_demo.py
```

## API å‚è€ƒ

è¯¦ç»†çš„APIæ–‡æ¡£è¯·å‚è€ƒå„ä¸ªæ¨¡å—çš„docstringï¼š

- `tool_v2.py` - æ ¸å¿ƒå·¥å…·æ¥å£å’Œæ•°æ®æ¨¡å‹
- `registry.py` - å·¥å…·æ³¨å†Œè¡¨å’Œå·¥å‚
- `executor.py` - æ‰§è¡Œå¼•æ“å’Œæ²™ç®±ç¯å¢ƒ
- `security.py` - å®‰å…¨ç®¡ç†å’Œæƒé™æ§åˆ¶
- `adapters.py` - åè®®é€‚é…å™¨
- `marketplace.py` - å·¥å…·å¸‚åœºåŠŸèƒ½
- `tool_system.py` - ç»Ÿä¸€å·¥å…·ç³»ç»Ÿæ¥å£

## è´¡çŒ®æŒ‡å—

æ¬¢è¿è´¡çŒ®æ–°çš„å·¥å…·ã€é€‚é…å™¨å’Œå®‰å…¨ç­–ç•¥ã€‚è¯·éµå¾ªä»¥ä¸‹åŸåˆ™ï¼š

1. éµå¾ªç°æœ‰çš„ä»£ç é£æ ¼å’Œæ¶æ„è®¾è®¡
2. ä¸ºæ–°åŠŸèƒ½æ·»åŠ å®Œæ•´çš„æµ‹è¯•ç”¨ä¾‹
3. æ›´æ–°ç›¸å…³æ–‡æ¡£å’Œç¤ºä¾‹
4. ç¡®ä¿å‘åå…¼å®¹æ€§
5. é€šè¿‡å®‰å…¨å®¡æŸ¥å’Œæ€§èƒ½æµ‹è¯•

## è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - è¯¦è§ LICENSE æ–‡ä»¶ã€‚